<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kkr.Tattoo</title>
    <link rel="stylesheet" href="main.css">
    <link rel="icon" href="Imagenes/Logo.png" type="image/png">

    <link href="https://fonts.googleapis.com/css2?family=Slabo+27px&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>

    <div id="intro-overlay">
        <div class="logo-card">
            <div class="logo-card-img-container">
                <img src="Imagenes/Logo.png" alt="Logo KKR.TATTO">
            </div>
        </div>
    </div>
    <div id="page-content" class="page-blurred">

        <header class="topbar">
            <div class="logo">KKR.TATTOO </div>
            <nav>
                <ul class="menu-top">
                    <li><a href="#">Inicio</a></li>
                    <li><a href="#horario">Horario</a></li>
                    <li><a href="#piezas">Piezas</a></li>
                    <li><a href="#">Socios</a></li>
                    <li><a href="#">Contacto</a></li>

                    <li class="insta">
                        <a href="https://www.instagram.com/kkr.tattoo/" target="_blank">
                            <i class="fa-brands fa-instagram"></i> kkr.tattoo
                        </a>
                    </li>
                    <li class="tiktok">
                        <a href="https://www.tiktok.com/@kkrtattoo" target="_blank">
                            <i class="fa-brands fa-tiktok"></i> kkrtattoo
                        </a>
                    </li>
                </ul>
            </nav>
        </header>
        <main class="content">

            <div class="Juan">
                <img src="Imagenes/Juan.jpg" alt="Kkr.Tattoo">

                <div class="info-card">
                    <h2>Juan Gutierrez</h2>
                    <p class="rol">Artista del tatuaje</p>
                    <p class="estilo">Especialista en <strong>Surrealismo</strong> y <strong>Realismo</strong>.</p>
                    <p class="bio">Con m√°s de 8 a√±os de experiencia, fusiona t√©cnica y creatividad para crear piezas
                        √∫nicas.
                    </p>
                    <strong>Estudio de tatuajes en Fern√°n N√∫√±ez</strong>
                    <p>Calle: Juan Carlos I 53 (LOCAL) Fern√°n N√∫√±ez, C√≥rdoba</p>

                    <div id="intro-logo" class="logo-card">
                        <div class="logo-card-img-container">
                            <img class="imagendiv" src="Imagenes/Logo.png" alt="Logo KKR.TATTO">
                        </div>
                    </div>
                </div>
            </div>
            <div id="horario" class="div2">
                <p class="horarioapertura">Horarios Apertura del Estudio</p>

                <div class="horarios">
                    <table class="horario-horizontal">
                        <thead>
                            <tr>
                                <th>Lunes</th>
                                <th>Martes</th>
                                <th>Mi√©rcoles</th>
                                <th>Jueves</th>
                                <th>Viernes</th>
                                <th>S√°bado</th>
                                <th>Domingo</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Ma√±anas: 09:00 - 14:00<br>Tardes: 16:00 - 21:00</td>
                                <td class="cerrado">Cerrado</td>
                                <td>Ma√±anas: 09:00 - 14:00<br>Tardes: 16:00 - 21:00</td>
                                <td class="cerrado">Cerrado</td>
                                <td>Ma√±anas: 09:00 - 14:00<br>Tardes: 16:00 - 21:00</td>
                                <td class="cerrado">Cerrado</td>
                                <td class="cerrado">Cerrado</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <p class="piezastxt">Mis Piezas</p>

            <div id="piezas" class="div3">
                <div class="album-card" id="Album1">
                    <div class="carousel-container">
                        <div class="card-default-view">
                            <img src="Imagenes/Album1/Imagen1Album1.jpg" alt="Imagen principal del Album 1">
                        </div>
                        <div class="album-carousel">
                            <div class="carousel-images">
                                <img src="Imagenes/Album1/Imagen1Album1.jpg" alt="Imagen 1 del Album 1">
                                <img src="Imagenes/Album1/Imagen2Album1.jpg" alt="Imagen 2 del Album 1">
                            </div>
                            <button class="prev-btn">‚ùÆ</button>
                            <button class="next-btn">‚ùØ</button>
                        </div>
                    </div>
                </div>

                <div class="album-card" id="Album2">
                    <div class="carousel-container">
                        <div class="card-default-view">
                            <img src="Imagenes/Album2/Imagen1Album2.jpg" alt="Imagen principal del Album 2">
                        </div>
                        <div class="album-carousel">
                            <div class="carousel-images">
                                <img src="Imagenes/Album2/Imagen1Album2.jpg" alt="Imagen 1 del Album 2">
                                <img src="Imagenes/Album2/Imagen2Album2.jpg" alt="Imagen 2 del Album 2">
                            </div>
                            <button class="prev-btn">‚ùÆ</button>
                            <button class="next-btn">‚ùØ</button>
                        </div>
                    </div>
                </div>

                <div class="album-card" id="Album3">
                    <div class="carousel-container">
                        <div class="card-default-view">
                            <img src="Imagenes/Album3/Imagen1Album3.jpg" alt="Imagen principal del Album 3">
                        </div>
                        <div class="album-carousel">
                            <div class="carousel-images">
                                <img src="Imagenes/Album3/Imagen1Album3.jpg" alt="Imagen 1 del Album 3">
                                <img src="Imagenes/Album3/Imagen2Album3.jpg" alt="Imagen 2 del Album 3">
                            </div>
                            <button class="prev-btn">‚ùÆ</button>
                            <button class="next-btn">‚ùØ</button>
                        </div>
                    </div>
                </div>

                <div class="album-card" id="Album4">
                    <div class="carousel-container">
                        <div class="card-default-view">
                            <img src="Imagenes/Album4/Imagen1Album4.jpg" alt="Imagen principal del Album 4">
                        </div>
                        <div class="album-carousel">
                            <div class="carousel-images">
                                <img src="Imagenes/Album4/Imagen1Album4.jpg" alt="Imagen 1 del Album 4">
                                <img src="Imagenes/Album4/Imagen2Album4.jpg" alt="Imagen 2 del Album 4">
                            </div>
                            <button class="prev-btn">‚ùÆ</button>
                            <button class="next-btn">‚ùØ</button>
                        </div>
                    </div>
                </div>

                <div class="album-card" id="Album5">
                    <div class="carousel-container">
                        <div class="card-default-view">
                            <img src="Imagenes/Album5/Imagen1Album5.jpg" alt="Imagen principal del Album 5">
                        </div>
                        <div class="album-carousel">
                            <div class="carousel-images">
                                <img src="Imagenes/Album5/Imagen1Album5.jpg" alt="Imagen 1 del Album 5">
                                <img src="Imagenes/Album5/Imagen2Album5.jpg" alt="Imagen 2 del Album 5">
                            </div>
                            <button class="prev-btn">‚ùÆ</button>
                            <button class="next-btn">‚ùØ</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="div4">Otras Secciones o Informaci√≥n</div>
            <div class="div5">Contacto o Footer</div>
        </main>

    </div>

    <div id="lightbox" class="lightbox">
        <div class="lightbox-backdrop"></div>
        <div class="lightbox-content">
            <span class="lightbox-close">&times;</span>
            <div class="lightbox-carousel-images">
            </div>
            <button class="lightbox-prev-btn">‚ùÆ</button>
            <button class="lightbox-next-btn">‚ùØ</button>
        </div>
    </div>
    <script>
        // Funci√≥n para inicializar el carrusel de cada tarjeta (al hacer hover)
        function initializeCarousel(albumId) {
            const albumCard = document.getElementById(albumId);
            if (!albumCard) return;

            const carouselImagesContainer = albumCard.querySelector('.carousel-images');
            const images = carouselImagesContainer.querySelectorAll('img');
            const prevBtn = albumCard.querySelector('.prev-btn');
            const nextBtn = albumCard.querySelector('.next-btn');

            let currentIndex = 0;
            const totalImages = images.length;

            function updateCarousel() {
                const offset = -currentIndex * 100;
                carouselImagesContainer.style.transform = `translateX(${offset}%)`;
            }

            // Evitar que el click en las flechas inicie el Lightbox
            prevBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                currentIndex = (currentIndex - 1 + totalImages) % totalImages;
                updateCarousel();
            });

            nextBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                currentIndex = (currentIndex + 1) % totalImages;
                updateCarousel();
            });


            let slideInterval;

            albumCard.addEventListener('mouseenter', () => {
                clearInterval(slideInterval);
                currentIndex = 0; // Reset al principio al entrar
                updateCarousel();

                // Auto-slide solo si hay m√°s de una imagen
                if (totalImages > 1) {
                    slideInterval = setInterval(() => {
                        currentIndex = (currentIndex + 1) % totalImages;
                        updateCarousel();
                    }, 2000); // Cambia de imagen cada 2 segundos
                }
            });

            albumCard.addEventListener('mouseleave', () => {
                clearInterval(slideInterval); // Detiene el auto-slide
            });
        }

        // --- C√ìDIGO NUEVO PARA EL SCROLL M√çNIMO Y LA BARRA DE NAVEGACI√ìN ---
        function setupScrollEffect() {
            const topbar = document.querySelector('.topbar');
            // Umbral de scroll m√≠nimo (10 p√≠xeles). ¬°Esto lo activa casi inmediatamente!
            const scrollThreshold = 10;

            function checkScroll() {
                // Comprueba si el scroll vertical es mayor que el umbral
                if (window.scrollY > scrollThreshold) {
                    topbar.classList.add('scrolled-topbar');
                } else {
                    topbar.classList.remove('scrolled-topbar');
                }
            }

            // Asigna la funci√≥n al evento de scroll y la ejecuta al cargar 
            window.addEventListener('scroll', checkScroll);
            checkScroll(); // Ejecuta una vez al inicio por si la p√°gina ya carga desplazada
        }
        // --- FIN C√ìDIGO NUEVO ---


        // Inicializaci√≥n y L√≥gica Principal
        document.addEventListener('DOMContentLoaded', () => {
            // --- C√ìDIGO DE ANIMACI√ìN DE INTRO ---
            const introLogoAnimated = document.querySelector('#intro-overlay .logo-card');
            const introLogoDestination = document.getElementById('intro-logo');
            const introOverlay = document.getElementById('intro-overlay');
            const pageContent = document.getElementById('page-content');

            // Asegurar que el c√°lculo de la posici√≥n final se hace despu√©s de que el DOM est√° listo
            window.requestAnimationFrame(() => {
                const targetRect = introLogoDestination.getBoundingClientRect();
                const animatedRect = introLogoAnimated.getBoundingClientRect();
                const dx = targetRect.left - animatedRect.left;
                const dy = targetRect.top - animatedRect.top;

                introLogoAnimated.style.setProperty('--dx', `${dx}px`);
                introLogoAnimated.style.setProperty('--dy', `${dy}px`);

                // Ejecutar la animaci√≥n CSS
                introLogoAnimated.style.animation = 'logo-intro-animation 2.5s forwards';

                // Mostrar la p√°gina y desvanecer el overlay
                setTimeout(() => {
                    pageContent.classList.remove('page-blurred');
                    introLogoDestination.style.visibility = 'visible';
                    introLogoDestination.style.opacity = '1'; // El logo se hace visible en el destino
                    introOverlay.style.opacity = '0'; // Desvanece la capa de intro
                }, 2000); // Coincide con el tiempo de la animaci√≥n

                // Eliminar el overlay del DOM
                setTimeout(() => {
                    introOverlay.style.display = 'none';
                }, 2500);
            });


            // üöÄ Inicializar todos los carruseles de las tarjetas
            initializeCarousel('Album1');
            initializeCarousel('Album2');
            initializeCarousel('Album3');
            initializeCarousel('Album4');
            initializeCarousel('Album5');

            // üåü INICIALIZAR EL EFECTO DE SCROLL M√çNIMO
            setupScrollEffect();


            // --- L√ìGICA DEL LIGHTBOX CON CARRUSEL INTEGRADO ---
            const lightbox = document.getElementById('lightbox');
            const lightboxCarouselImagesContainer = lightbox.querySelector('.lightbox-carousel-images');
            const lightboxPrevBtn = lightbox.querySelector('.lightbox-prev-btn');
            const lightboxNextBtn = lightbox.querySelector('.lightbox-next-btn');
            const closeBtn = lightbox.querySelector('.lightbox-close');
            const backdrop = lightbox.querySelector('.lightbox-backdrop');

            let currentLightboxAlbumImages = [];
            let currentLightboxIndex = 0;
            let currentLightboxTotalImages = 0;

            function updateLightboxCarousel() {
                const offset = -currentLightboxIndex * 100;
                lightboxCarouselImagesContainer.style.transform = `translateX(${offset}%)`;
            }

            // Manejador para el bot√≥n Siguiente del lightbox
            lightboxNextBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                currentLightboxIndex = (currentLightboxIndex + 1) % currentLightboxTotalImages;
                updateLightboxCarousel();
            });

            // Manejador para el bot√≥n Anterior del lightbox
            lightboxPrevBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                currentLightboxIndex = (currentLightboxIndex - 1 + currentLightboxTotalImages) % currentLightboxTotalImages;
                updateLightboxCarousel();
            });

            // Capturar clics en cualquier imagen de la galer√≠a de piezas
            const div3 = document.querySelector('.div3');

            div3.addEventListener('click', (e) => {
                // Solo actuar si el clic fue en una imagen dentro de un album-card
                if (e.target.tagName === 'IMG' && e.target.closest('.album-card')) {
                    const clickedImage = e.target;
                    const albumCard = clickedImage.closest('.album-card');

                    // 1. Recopilar TODAS las im√°genes del carrusel del √°lbum clicado
                    const albumImages = Array.from(albumCard.querySelectorAll('.carousel-images img')).map(img => img.src);
                    currentLightboxAlbumImages = albumImages;
                    currentLightboxTotalImages = albumImages.length;

                    // 2. Determinar el √≠ndice de la imagen clicada (puede ser la default view o una del carrusel)
                    let clickedImageSrc = clickedImage.src;

                    // Si clicaste la imagen de la vista por defecto, su src ya est√° correcto.
                    // Si clicaste una del carrusel, tambi√©n.
                    currentLightboxIndex = albumImages.indexOf(clickedImageSrc);
                    // Si no la encuentra (p. ej. por la URL completa), forzamos a 0
                    if (currentLightboxIndex === -1) {
                        currentLightboxIndex = 0;
                    }


                    // 3. Rellenar el carrusel del lightbox din√°micamente
                    lightboxCarouselImagesContainer.innerHTML = ''; // Limpiar contenido anterior
                    albumImages.forEach(src => {
                        const imgElement = document.createElement('img');
                        imgElement.src = src;
                        imgElement.alt = "Tatuaje de Kkr.Tattoo";
                        lightboxCarouselImagesContainer.appendChild(imgElement);
                    });

                    // 4. Mostrar el lightbox y posicionar el carrusel
                    updateLightboxCarousel(); // Posicionar en la imagen correcta
                    lightbox.classList.add('active');
                    document.body.style.overflow = 'hidden'; // Evita el scroll de fondo

                    // Aseg√∫rate de que los botones de navegaci√≥n se muestren/oculten si solo hay 1 imagen
                    if (currentLightboxTotalImages <= 1) {
                        lightboxPrevBtn.style.display = 'none';
                        lightboxNextBtn.style.display = 'none';
                    } else {
                        lightboxPrevBtn.style.display = 'block';
                        lightboxNextBtn.style.display = 'block';
                    }
                }
            });

            // 5. Cerrar el Lightbox (Bot√≥n X, Backdrop, Tecla ESC)
            const closeLightbox = () => {
                lightbox.classList.remove('active');
                document.body.style.overflow = ''; // Restaura el scroll de fondo
            };

            closeBtn.addEventListener('click', closeLightbox);
            backdrop.addEventListener('click', closeLightbox);

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && lightbox.classList.contains('active')) {
                    closeLightbox();
                }
                // Navegaci√≥n con flechas del teclado dentro del Lightbox
                if (lightbox.classList.contains('active') && currentLightboxTotalImages > 1) {
                    if (e.key === 'ArrowRight') {
                        currentLightboxIndex = (currentLightboxIndex + 1) % currentLightboxTotalImages;
                        updateLightboxCarousel();
                    } else if (e.key === 'ArrowLeft') {
                        currentLightboxIndex = (currentLightboxIndex - 1 + currentLightboxTotalImages) % currentLightboxTotalImages;
                        updateLightboxCarousel();
                    }
                }
            });
        });
    </script>
</body>

</html>