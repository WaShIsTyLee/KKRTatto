<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>KKR.TATTOO | Estudio de Tatuajes Realismo y Surrealismo en Fernán Núñez, Córdoba</title>
    <meta name="description" content="Tatuador Juan Gutierrez, especialista en Realismo y Surrealismo. Estudio de tatuajes profesional en Fernán Núñez, Córdoba. Consulta horarios y portafolio de piezas.">
    <meta name="keywords" content="tatuajes, realismo, surrealismo, fernan nuñez, córdoba, kkr.tattoo, juan gutierrez, estudio de tatuajes, tatuajes córdoba">

    <link rel="stylesheet" href="main.css">
    <link rel="icon" href="Imagenes/Logo.png" type="image/png">

    <link href="https://fonts.googleapis.com/css2?family=Slabo+27px&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>

    <div id="intro-overlay">
        <div class="logo-card">
            <div class="logo-card-img-container">
                <img src="Imagenes/Logo.png" alt="Logo KKR.TATTO">
            </div>
        </div>
    </div>

    <div id="page-content" class="page-blurred">

        <header class="topbar">
            <h1 class="logo">KKR.TATTOO </h1>
            <nav>
                <ul class="menu-top">
                    <li><a href="#">Inicio</a></li>
                    <li><a href="#horario">Horario</a></li>
                    <li><a href="#piezas">Piezas</a></li>
                    <li><a href="#">Socios</a></li>
                    <li><a href="#">Contacto</a></li>

                    <li class="insta">
                        <a href="https://www.instagram.com/kkr.tattoo/" target="_blank">
                            <i class="fa-brands fa-instagram"></i> kkr.tattoo
                        </a>
                    </li>
                    <li class="tiktok">
                        <a href="https://www.tiktok.com/@kkrtattoo" target="_blank">
                            <i class="fa-brands fa-tiktok"></i> kkrtattoo
                        </a>
                    </li>
                </ul>
            </nav>
        </header>

        <main class="content">

            <div class="Juan">
                <img src="Imagenes/Juan.jpg" alt="Retrato del Tatuador Juan Gutierrez (KKR.TATTOO)">

                <div class="info-card">
                    <h2>Juan Gutierrez</h2>
                    <p class="rol">Artista del tatuaje</p>
                    <p class="estilo">Especialista en **Surrealismo** y **Realismo**.</p>
                    <p class="bio">Con más de 8 años de experiencia, fusiona técnica y creatividad para crear piezas
                        únicas.
                    </p>
                    <strong>Estudio de tatuajes en Fernán Núñez</strong>
                    <p>Calle: Juan Carlos I 53 (LOCAL) Fernán Núñez, Córdoba</p>

                    <div id="intro-logo" class="logo-card">
                        <div class="logo-card-img-container">
                            <img class="imagendiv" src="Imagenes/Logo.png" alt="Logo KKR.TATTO">
                        </div>
                    </div>
                </div>
            </div>

            <div id="horario" class="div2">
                <h2 class="horarioapertura">Horarios Apertura del Estudio</h2>

                <div class="horarios">
                    <table class="horario-horizontal">
                        <thead>
                            <tr>
                                <th>Lunes</th>
                                <th>Martes</th>
                                <th>Miércoles</th>
                                <th>Jueves</th>
                                <th>Viernes</th>
                                <th>Sábado</th>
                                <th>Domingo</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Mañanas: 09:00 - 14:00<br>Tardes: 16:00 - 21:00</td>
                                <td class="cerrado">Cerrado</td>
                                <td>Mañanas: 09:00 - 14:00<br>Tardes: 16:00 - 21:00</td>
                                <td class="cerrado">Cerrado</td>
                                <td>Mañanas: 09:00 - 14:00<br>Tardes: 16:00 - 21:00</td>
                                <td class="cerrado">Cerrado</td>
                                <td class="cerrado">Cerrado</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <h2 class="piezastxt">Mi Portafolio de Piezas (Galería)</h2>

            <div id="piezas" class="div3">
                <div class="album-card" id="Album1">
                    <div class="carousel-container">
                        <div class="card-default-view">
                            <img src="Imagenes/Album1/Imagen1Album1.jpg" alt="Tatuaje en estilo Realismo 1">
                        </div>
                        <div class="album-carousel">
                            <div class="carousel-images">
                                <img src="Imagenes/Album1/Imagen1Album1.jpg" alt="Tatuaje en estilo Realismo, brazo completo">
                                <img src="Imagenes/Album1/Imagen2Album1.jpg" alt="Detalle Tatuaje Realismo, León">
                            </div>
                            <button class="prev-btn">❮</button>
                            <button class="next-btn">❯</button>
                        </div>
                    </div>
                </div>

                <div class="album-card" id="Album2">
                    <div class="carousel-container">
                        <div class="card-default-view">
                            <img src="Imagenes/Album2/Imagen1Album2.jpg" alt="Tatuaje en estilo Surrealismo 1">
                        </div>
                        <div class="album-carousel">
                            <div class="carousel-images">
                                <img src="Imagenes/Album2/Imagen1Album2.jpg" alt="Tatuaje surrealista, reloj y figuras">
                                <img src="Imagenes/Album2/Imagen2Album2.jpg" alt="Detalle Tatuaje Surrealista, ojo">
                            </div>
                            <button class="prev-btn">❮</button>
                            <button class="next-btn">❯</button>
                        </div>
                    </div>
                </div>
                
                <div class="album-card" id="Album3">
                    <div class="carousel-container">
                        <div class="card-default-view">
                            <img src="Imagenes/Album3/Imagen1Album3.jpg" alt="Tatuaje B&N Realista">
                        </div>
                        <div class="album-carousel">
                            <div class="carousel-images">
                                <img src="Imagenes/Album3/Imagen1Album3.jpg" alt="Tatuaje en blanco y negro, retrato">
                                <img src="Imagenes/Album3/Imagen2Album3.jpg" alt="Tatuaje en blanco y negro, mano">
                            </div>
                            <button class="prev-btn">❮</button>
                            <button class="next-btn">❯</button>
                        </div>
                    </div>
                </div>

                <div class="album-card" id="Album4">
                    <div class="carousel-container">
                        <div class="card-default-view">
                            <img src="Imagenes/Album4/Imagen1Album4.jpg" alt="Tatuaje Realismo Color">
                        </div>
                        <div class="album-carousel">
                            <div class="carousel-images">
                                <img src="Imagenes/Album4/Imagen1Album4.jpg" alt="Tatuaje en color, estilo realista">
                                <img src="Imagenes/Album4/Imagen2Album4.jpg" alt="Tatuaje en color, detalle de la cara">
                            </div>
                            <button class="prev-btn">❮</button>
                            <button class="next-btn">❯</button>
                        </div>
                    </div>
                </div>

                <div class="album-card" id="Album5">
                    <div class="carousel-container">
                        <div class="card-default-view">
                            <img src="Imagenes/Album5/Imagen1Album5.jpg" alt="Tatuaje temático de animales">
                        </div>
                        <div class="album-carousel">
                            <div class="carousel-images">
                                <img src="Imagenes/Album5/Imagen1Album5.jpg" alt="Tatuaje de animal, lobo">
                                <img src="Imagenes/Album5/Imagen2Album5.jpg" alt="Tatuaje de animal, ojo de tigre">
                            </div>
                            <button class="prev-btn">❮</button>
                            <button class="next-btn">❯</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="div4">Otras Secciones o Información</div>
            <div class="div5">Contacto o Footer</div>
        </main>

    </div>

    <div id="lightbox" class="lightbox">
        <div class="lightbox-backdrop"></div>
        <div class="lightbox-content">
            <span class="lightbox-close">&times;</span>
            <div class="lightbox-carousel-images">
            </div>
            <button class="lightbox-prev-btn">❮</button>
            <button class="lightbox-next-btn">❯</button>
        </div>
    </div>

    <script>
        // Función para inicializar el carrusel de cada tarjeta (al hacer hover)
        function initializeCarousel(albumId) {
            const albumCard = document.getElementById(albumId);
            if (!albumCard) return;

            const carouselImagesContainer = albumCard.querySelector('.carousel-images');
            const images = carouselImagesContainer.querySelectorAll('img');
            const prevBtn = albumCard.querySelector('.prev-btn');
            const nextBtn = albumCard.querySelector('.next-btn');

            let currentIndex = 0;
            const totalImages = images.length;

            function updateCarousel() {
                const offset = -currentIndex * 100;
                carouselImagesContainer.style.transform = `translateX(${offset}%)`;
            }

            // Evitar que el click en las flechas inicie el Lightbox
            prevBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                currentIndex = (currentIndex - 1 + totalImages) % totalImages;
                updateCarousel();
            });

            nextBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                currentIndex = (currentIndex + 1) % totalImages;
                updateCarousel();
            });


            let slideInterval;

            albumCard.addEventListener('mouseenter', () => {
                clearInterval(slideInterval);
                currentIndex = 0; // Reset al principio al entrar
                updateCarousel();

                // Auto-slide solo si hay más de una imagen
                if (totalImages > 1) {
                    slideInterval = setInterval(() => {
                        currentIndex = (currentIndex + 1) % totalImages;
                        updateCarousel();
                    }, 2000); // Cambia de imagen cada 2 segundos
                }
            });

            albumCard.addEventListener('mouseleave', () => {
                clearInterval(slideInterval); // Detiene el auto-slide
            });
        }

        // --- CÓDIGO PARA EL SCROLL MÍNIMO Y LA BARRA DE NAVEGACIÓN ---
        function setupScrollEffect() {
            const topbar = document.querySelector('.topbar');
            // Umbral de scroll mínimo (10 píxeles). ¡Esto lo activa casi inmediatamente!
            const scrollThreshold = 10;

            function checkScroll() {
                // Comprueba si el scroll vertical es mayor que el umbral
                if (window.scrollY > scrollThreshold) {
                    topbar.classList.add('scrolled-topbar');
                } else {
                    topbar.classList.remove('scrolled-topbar');
                }
            }

            // Asigna la función al evento de scroll y la ejecuta al cargar 
            window.addEventListener('scroll', checkScroll);
            checkScroll(); // Ejecuta una vez al inicio por si la página ya carga desplazada
        }
        // --- FIN CÓDIGO NUEVO ---


        // Inicialización y Lógica Principal
        document.addEventListener('DOMContentLoaded', () => {
            // --- CÓDIGO DE ANIMACIÓN DE INTRO ---
            const introLogoAnimated = document.querySelector('#intro-overlay .logo-card');
            const introLogoDestination = document.getElementById('intro-logo');
            const introOverlay = document.getElementById('intro-overlay');
            const pageContent = document.getElementById('page-content');

            // Asegurar que el cálculo de la posición final se hace después de que el DOM está listo
            window.requestAnimationFrame(() => {
                const targetRect = introLogoDestination.getBoundingClientRect();
                const animatedRect = introLogoAnimated.getBoundingClientRect();
                const dx = targetRect.left - animatedRect.left;
                const dy = targetRect.top - animatedRect.top;

                introLogoAnimated.style.setProperty('--dx', `${dx}px`);
                introLogoAnimated.style.setProperty('--dy', `${dy}px`);

                // Ejecutar la animación CSS
                introLogoAnimated.style.animation = 'logo-intro-animation 2.5s forwards';

                // Mostrar la página y desvanecer el overlay
                setTimeout(() => {
                    pageContent.classList.remove('page-blurred');
                    introLogoDestination.style.visibility = 'visible';
                    introLogoDestination.style.opacity = '1'; // El logo se hace visible en el destino
                    introOverlay.style.opacity = '0'; // Desvanece la capa de intro
                }, 2000); // Coincide con el tiempo de la animación

                // Eliminar el overlay del DOM
                setTimeout(() => {
                    introOverlay.style.display = 'none';
                }, 2500);
            });


            // 🚀 Inicializar todos los carruseles de las tarjetas
            initializeCarousel('Album1');
            initializeCarousel('Album2');
            initializeCarousel('Album3');
            initializeCarousel('Album4');
            initializeCarousel('Album5');

            // 🌟 INICIALIZAR EL EFECTO DE SCROLL MÍNIMO
            setupScrollEffect();


            // --- LÓGICA DEL LIGHTBOX CON CARRUSEL INTEGRADO ---
            const lightbox = document.getElementById('lightbox');
            const lightboxCarouselImagesContainer = lightbox.querySelector('.lightbox-carousel-images');
            const lightboxPrevBtn = lightbox.querySelector('.lightbox-prev-btn');
            const lightboxNextBtn = lightbox.querySelector('.lightbox-next-btn');
            const closeBtn = lightbox.querySelector('.lightbox-close');
            const backdrop = lightbox.querySelector('.lightbox-backdrop');

            let currentLightboxAlbumImages = [];
            let currentLightboxIndex = 0;
            let currentLightboxTotalImages = 0;

            function updateLightboxCarousel() {
                const offset = -currentLightboxIndex * 100;
                lightboxCarouselImagesContainer.style.transform = `translateX(${offset}%)`;
            }

            // Manejador para el botón Siguiente del lightbox
            lightboxNextBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                currentLightboxIndex = (currentLightboxIndex + 1) % currentLightboxTotalImages;
                updateLightboxCarousel();
            });

            // Manejador para el botón Anterior del lightbox
            lightboxPrevBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                currentLightboxIndex = (currentLightboxIndex - 1 + currentLightboxTotalImages) % currentLightboxTotalImages;
                updateLightboxCarousel();
            });

            // Función para cerrar el lightbox
            function closeLightbox() {
                lightbox.classList.remove('active');
            }

            closeBtn.addEventListener('click', closeLightbox);
            backdrop.addEventListener('click', closeLightbox);

            // Cerrar con tecla ESC
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && lightbox.classList.contains('active')) {
                    closeLightbox();
                }
            });


            // Capturar clics en cualquier imagen de la galería de piezas
            const div3 = document.querySelector('.div3');

            div3.addEventListener('click', (e) => {
                // Solo actuar si el clic fue en una imagen dentro de un album-card
                if (e.target.tagName === 'IMG' && e.target.closest('.album-card')) {
                    const clickedImage = e.target;
                    const albumCard = clickedImage.closest('.album-card');

                    // 1. Recopilar TODAS las imágenes del carrusel del álbum clicado
                    const albumImages = Array.from(albumCard.querySelectorAll('.carousel-images img')).map(img => ({
                        src: img.src,
                        alt: img.alt
                    }));
                    currentLightboxAlbumImages = albumImages;
                    currentLightboxTotalImages = albumImages.length;

                    // 2. Determinar el índice de la imagen clicada
                    let clickedImageSrc = clickedImage.src;
                    currentLightboxIndex = albumImages.findIndex(img => img.src === clickedImageSrc);

                    if (currentLightboxIndex === -1) {
                        currentLightboxIndex = 0;
                    }


                    // 3. Rellenar el carrusel del lightbox dinámicamente
                    lightboxCarouselImagesContainer.innerHTML = ''; // Limpiar contenido anterior
                    albumImages.forEach(imgData => {
                        const imgElement = document.createElement('img');
                        imgElement.src = imgData.src;
                        imgElement.alt = imgData.alt; // Se usa el 'alt' para accesibilidad
                        lightboxCarouselImagesContainer.appendChild(imgElement);
                    });

                    // 4. Mostrar el lightbox y posicionar el carrusel
                    lightbox.classList.add('active');
                    updateLightboxCarousel();

                    // Mostrar/Ocultar botones si solo hay una imagen
                    const display = currentLightboxTotalImages > 1 ? 'block' : 'none';
                    lightboxPrevBtn.style.display = display;
                    lightboxNextBtn.style.display = display;

                }
            });
        });

    </script>
</body>
</html>